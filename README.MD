# WebScrapACICs - DocumentaÃ§Ã£o Oficial

## Sobre o Projeto

O **WebScrapACICs** Ã© um sistema automatizado de coleta de dados (web scraping) desenvolvido para extrair informaÃ§Ãµes de empresas associadas Ã s **AssociaÃ§Ãµes Comerciais e Industriais (ACICs)** de diversas cidades do ParanÃ¡.

### Objetivo Principal

Automatizar a coleta de dados empresariais de mÃºltiplas ACICs,:

- Nome da empresa
- Telefone de contato
- EndereÃ§o completo
- CEP
- Email (quando disponÃ­vel)
- Cidade de origem

---

## âœ¨ Funcionalidades

### ğŸ”§ Funcionalidades Principais

- âœ… **Scraping automatizado** de mÃºltiplas ACICs
- âœ… **ExecuÃ§Ã£o seletiva** por cidade ou completa
- âœ… **ConsolidaÃ§Ã£o de dados** em formato JSON e Excel
- âœ… **Tratamento robusto de erros** e timeouts
- âœ… **Logs detalhados** do processo de extraÃ§Ã£o
- âœ… **Rate limiting** para evitar sobrecarga dos servidores
- âœ… **Polyfills** para compatibilidade com Node.js 16
- âœ… **Estrutura modular** facilmente extensÃ­vel

### ğŸ“Š SaÃ­das de Dados

- **JSON**: Arquivo estruturado casa haja necessidades futuras
- **Excel (.xlsx)**: Planilha formatada com colunas organizadas

---

## ğŸ› ï¸ Tecnologias Utilizadas

### Core Dependencies

```json
{
  "axios": "^1.x.x", // RequisiÃ§Ãµes HTTP
  "cheerio": "^1.x.x", // Parser HTML (jQuery-like)
  "xlsx": "^0.x.x" // GeraÃ§Ã£o de planilhas Excel
}
```

### Tecnologias de Desenvolvimento

- **Node.js 22**: Runtime JavaScript
- **ES6+ Modules**: Estrutura modular moderna
- **Async/Await**: ProgramaÃ§Ã£o assÃ­ncrona
- **Error Handling**: Tratamento robusto de exceÃ§Ãµes
- **File System**: ManipulaÃ§Ã£o de arquivos nativos

---

## ğŸ“ Estrutura do Projeto

```
WebScrapACICs/
â”œâ”€â”€ ğŸ“ Cidades/                 # DiretÃ³rio principal dos scrapers
â”‚   â”œâ”€â”€ ğŸ“ cafelandia/
â”‚   â”‚   â””â”€â”€ script.js           # Scraper da ACICAF
â”‚   â”œâ”€â”€ ğŸ“ capitao/
â”‚   â”‚   â””â”€â”€ scraper-acicap.js   # Scraper da ACICAP
â”‚   â”œâ”€â”€ ğŸ“ cascavel/
â”‚   â”‚   â””â”€â”€ script.js           # Scraper da ACIC Cascavel
â”‚   â”œâ”€â”€ ğŸ“ ceuAzul/
â”‚   â”‚   â””â”€â”€ script.js           # Scraper CÃ©u Azul
â”‚   â”œâ”€â”€ ğŸ“ corbelia/
â”‚   â”‚   â””â”€â”€ script.js           # Scraper da ACICORB
â”‚   â”œâ”€â”€ ğŸ“ guaraniacu/
â”‚   â”‚   â””â”€â”€ script.js           # Scraper GuaraniaÃ§u
â”‚   â”œâ”€â”€ ğŸ“ jesuitas/
â”‚   â”‚   â””â”€â”€ script.js           # Scraper JesuÃ­tas
â”‚   â”œâ”€â”€ ğŸ“ lindoOeste/
â”‚   â”‚   â””â”€â”€ script.js           # Scraper da ACICLO
â”‚   â”œâ”€â”€ ğŸ“ marechal/
â”‚   â”‚   â””â”€â”€ scrap-acicamar.js   # Scraper da ACIMACAR
â”‚   â”œâ”€â”€ ğŸ“ matelandia/
â”‚   â”‚   â””â”€â”€ script.js           # Scraper da ACIMAT
â”‚   â”œâ”€â”€ ğŸ“ medianeira/
â”‚   â”‚   â””â”€â”€ scraper.js          # Scraper da ACIME
â”‚   â”œâ”€â”€ ğŸ“ novaAurora/
â”‚   â”‚   â””â”€â”€ script.js           # Scraper da ACINA
â”‚   â”œâ”€â”€ ğŸ“ santaHelena/
â”‚   â”‚   â””â”€â”€ script.js           # Scraper da ACISASH
â”‚   â”œâ”€â”€ ğŸ“ santaTereza/
â”‚   â”‚   â””â”€â”€ script.js           # Scraper da ACICTE
â”‚   â”œâ”€â”€ ğŸ“ toledo/
â”‚   â”‚   â””â”€â”€ script.js           # Scraper da ACIT
â”‚   â””â”€â”€ ğŸ“ tupassi/
â”‚       â””â”€â”€ script.js           # Scraper da ACITUP
â”œâ”€â”€ ğŸ“ results/                 # DiretÃ³rio de saÃ­da (gerado automaticamente)
â”‚   â”œâ”€â”€ empresas_consolidado_YYYY-MM-DD.json
â”‚   â””â”€â”€ empresas_consolidado_YYYY-MM-DD.xlsx
â”œâ”€â”€ index.js                    # Arquivo principal de orquestraÃ§Ã£o
â”œâ”€â”€ package.json                # DependÃªncias e scripts
â”œâ”€â”€ package-lock.json           # Lock de versÃµes
â””â”€â”€ README.md                   # Este arquivo
```

### ğŸ—‚ï¸ PadrÃµes de Nomenclatura

- **DiretÃ³rios**: Nome da cidade em camelCase (ex: `santaHelena`)
- **Arquivos de Script**: Variam entre `script.js`, `scraper.js`, ou nomes especÃ­ficos(padronizar para script.js futuramente)
- **SaÃ­das**: Formato `empresas_consolidado_YYYY-MM-DD.{json|xlsx}`

---

## âš™ï¸ InstalaÃ§Ã£o e ConfiguraÃ§Ã£o

### PrÃ©-requisitos

- **Node.js 22.x** (obrigatÃ³rio para compatibilidade)
- **npm** ou **yarn**
- ConexÃ£o estÃ¡vel com a internet
- **macOS/Linux** recomendado (testado em macOS)

### ğŸš€ InstalaÃ§Ã£o

1. **Clone o repositÃ³rio:**

   ```bash
   git clone https://github.com/JeversonMisaelDaCruz/WebScrapacics.git
   cd WebScrapacics
   ```

2. **Instale as dependÃªncias:**

   ```bash
   npm install
   ```

3. **Verifique a instalaÃ§Ã£o:**
   ```bash
   node index.js --help
   ```

### ğŸ”§ ConfiguraÃ§Ã£o

O projeto funciona **out-of-the-box** sem configuraÃ§Ãµes adicionais. Os scrapers sÃ£o auto-configurÃ¡veis e detectam automaticamente a estrutura de cada site.

---

## ğŸ”„ Fluxo de ExecuÃ§Ã£o

O sistema segue um fluxo .

![Fluxo de ExecuÃ§Ã£o do WebScrapACICs](https://i.imgur.com/zhchBI6.png)

### Detalhamento do Fluxo

1. **ğŸš€ InicializaÃ§Ã£o**: Carregamento dos mÃ³dulos de scraping disponÃ­veis
2. **âœ… VerificaÃ§Ã£o**: Teste de conectividade e validaÃ§Ã£o da estrutura dos sites
3. **âš™ï¸ Processamento**: ExecuÃ§Ã£o paralela dos scrapers selecionados
4. **ğŸ“Š Coleta**: ExtraÃ§Ã£o sistemÃ¡tica de dados por categoria empresarial
5. **ğŸ” Detalhamento**: Busca de informaÃ§Ãµes complementares de cada empresa
6. **ğŸ“ ConsolidaÃ§Ã£o**: UnificaÃ§Ã£o de todos os resultados coletados
7. **ğŸ’¾ ExportaÃ§Ã£o**: GeraÃ§Ã£o automÃ¡tica de arquivos JSON e Excel com timestamp

---

## Como Usar

### ExecuÃ§Ã£o Completa (Todas as Cidades)

```bash
# Executa todos os scrapers disponÃ­veis
node index.js
```

### ğŸ™ï¸ExecuÃ§Ã£o Seletiva (Cidades EspecÃ­ficas)

```bash
# Uma cidade
node index.js cascavel

# MÃºltiplas cidades
node index.js cascavel toledo medianeira

```

---

## ğŸ˜ï¸Cidades Suportadas

| Cidade                       | Chave         | ACIC     | Status        | ObservaÃ§Ãµes               |
| ---------------------------- | ------------- | -------- | ------------- | ------------------------- |
| **CafelÃ¢ndia**               | `cafelandia`  | ACICAF   | âœ… Ativo      | -                         |
| **CapitÃ£o LeÃ´nidas Marques** | `capitao`     | ACICAP   | âœ… Ativo      | -                         |
| **Cascavel**                 | `cascavel`    | ACIC     | âœ… Ativo      | Maior base de dados       |
| **CÃ©u Azul**                 | `ceuazul`     | ACINA    | âœ… Ativo      | -                         |
| **CorbÃ©lia**                 | `corbelia`    | ACICORB  | âœ… Ativo      | -                         |
| **GuaraniaÃ§u**               | `guaraniacu`  | -        | âœ… Ativo      | -                         |
| **JesuÃ­tas**                 | `jesuitas`    | -        | âœ… Ativo      | -                         |
| **Lindo Oeste**              | `lindooeste`  | ACICLO   | âœ… Ativo      | -                         |
| **Marechal CÃ¢ndido Rondon**  | `marechal`    | ACIMACAR | âœ… Ativo      | -                         |
| **MatelÃ¢ndia**               | `matelandia`  | ACIMAT   | âœ… Ativo      | -                         |
| **Medianeira**               | `medianeira`  | ACIME    | âœ… Ativo      | -                         |
| **Nova Aurora**              | `novaaurora`  | ACINA    | âœ… Ativo      | -                         |
| **Santa Helena**             | `santahelena` | ACISASH  | âœ… Ativo      | -                         |
| **Santa Tereza do Oeste**    | `santatereza` | ACICTE   | âš ï¸ Em revisÃ£o |                           |
| **Toledo**                   | `toledo`      | ACIT     | âœ… Ativo      | -                         |
| **TupÃ£ssi**                  | `tupassi`     | ACITUP   | âœ… Ativo      | -                         |

### ğŸ“ˆ EstatÃ­sticas

- **Total de Cidades**: 16
- **Cobertura Regional**: Oeste do ParanÃ¡

---
### ğŸ“„ Formato de SaÃ­da JSON

```json
[
  {
    "nome": "Empresa Exemplo Ltda",
    "telefone": "(45) 3123-4567",
    "endereco": "Rua das Flores, 123, Centro",
    "cep": "85123-456",
    "cidade": "Cascavel - PR",
    "email": "contato@empresaexemplo.com.br"
  }
]
```
### ğŸ“ˆ Formato Excel

- **Colunas**: Nome | Telefone | EndereÃ§o | CEP | Cidade | Email
- **Larguras**: Otimizadas automaticamente
- **FormataÃ§Ã£o**: Headers em negrito, dados centralizados

---

## ğŸ—ï¸ Arquitetura do Sistema

### ğŸ”§ PadrÃ£o de ImplementaÃ§Ã£o

Cada scraper segue um padrÃ£o arquitetural consistente:

```javascript
// Estrutura bÃ¡sica de um scraper
class CidadeScraper {
  constructor() {
    this.baseUrl = "URL_DA_ACIC";
    this.axiosConfig = {
      /* configuraÃ§Ãµes */
    };
  }

  async iniciarScraping() {
    // LÃ³gica principal de scraping
  }

  async processarCategoria(categoria) {
    // Processamento por categoria/seÃ§Ã£o
  }

  async coletarDetalhesEmpresa(url) {
    // Coleta detalhada de cada empresa
  }
}
```

### âš¡ OtimizaÃ§Ãµes Implementadas

- **Rate Limiting**: 500ms entre requisiÃ§Ãµes
- **Timeout ConfigurÃ¡vel**: 30s por requisiÃ§Ã£o
- **Headers Otimizados**: User-Agent realÃ­stico
- **Error Recovery**: Tentativas mÃºltiplas em caso de falha
- **Memory Management**: Limpeza automÃ¡tica de recursos

---

## ğŸ“‹ Sistema de Logs

```bash
# Exemplo de saÃ­da de logs
CapitÃ£o carregado
Executando scraper para ACICAP (CapitÃ£o)...
Encontradas 12 categorias
Processando: Tech Solutions Ltda
ACICAP (CapitÃ£o) concluÃ­do. Total: 45 empresas.
```

---

## ğŸš€ Melhorias Futuras

### ğŸ› ï¸ Melhorias TÃ©cnicas Imediatas

#### **Manutenibilidade**

- [ ] **TypeScript** migration
- [ ] **Sistema de Cache** para evitar re-scraping
- [ ] **ESLint + Prettier** configuration

#### **Monitoramento**

- [ ] **Error Tracking** (Sentry)

---

## ğŸ“– Como Adicionar uma Nova Cidade

1. **Crie o diretÃ³rio:**

   ```bash
   mkdir Cidades/nomeDaCidade
   ```

2. **Implemente o scraper:**

   ```javascript
   // Cidades/nomeDaCidade/script.js
   const axios = require("axios");
   const cheerio = require("cheerio");

   async function runNomeDaCidadeScraper() {
     // ImplementaÃ§Ã£o do scraper
     return empresas;
   }

   module.exports = runNomeDaCidadeScraper;
   ```

3. **Registre no index.js:**

   ```javascript
   const runNomeDaCidadeScraper = safeRequire("./nomeDaCidade/script");

   if (runNomeDaCidadeScraper) {
     AVAILABLE_CITIES.nomedacidade = {
       name: "ACIC (Nome da Cidade)",
       scraper: runNomeDaCidadeScraper,
     };
   }
   ```


