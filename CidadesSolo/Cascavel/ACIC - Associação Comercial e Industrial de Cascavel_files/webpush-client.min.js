/**
  * Resultados Digitais - 8/14/2025, 5:03:13 PM
  * webpush-client - Project that controls the webpush notifications and permissions
  * @version v1.0.0
  * @link undefined
  * @license MIT
  * @environment production
  */
/*! For license information please see webpush-client.min.js.LICENSE.txt */
var WebpushClient;(()=>{var t={293:(t,e,n)=>{t.exports=n(126)},126:t=>{t.exports={FIREBASE_CONFIG:{apiKey:"AIzaSyA00SEYIiPonMPdj5LWDg-vVYAM3vE9YZ4",appId:"1:659019139533:web:72543a7a37972562731c84",authDomain:"rd-rdsm-prd-01.firebaseapp.com",messagingSenderId:"659019139533",projectId:"rd-rdsm-prd-01",storageBucket:"rd-rdsm-prd-01.firebasestorage.app",vapidKey:"BFenMJT03Sc5wq3fLB77Hve69iqsGJ0Qv2QEnDmtB-76D7RXwlBdICPymVla2mAhSls82nmXJLI7DnvY4G_TD7w"},WEBPUSHER_CONFIG:{url:"https://webpusher.rdstation.com/webpush/fcm_token"},SERVICE_WORKER_PATH:"/RDSDK.min.js",EVENT_SERVICE_BASE_URL:"https://event-harbor.rdstation.com/events/web_push"}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}n.r(r),n.d(r,{WebpushClient:()=>ro});var i=function(){return t=function t(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.constructor===t)throw new Error("this is an abstract class")},(n=[{key:"getServiceToken",value:function(){throw new Error("The getServiceToken method must be implemented")}},{key:"registerNotificationListener",value:function(){throw new Error("The registerNotificationListener() method must be implemented")}},{key:"registerNotificationServiceWorker",value:function(){throw new Error("The registerNotificationServiceWorker() must be implemented")}}])&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();const a=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):55296==(64512&o)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++r)),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let e=0;e<t.length;e+=3){const o=t[e],i=e+1<t.length,a=i?t[e+1]:0,s=e+2<t.length,c=s?t[e+2]:0,u=o>>2,l=(3&o)<<4|a>>4;let f=(15&a)<<2|c>>6,p=63&c;s||(p=64,i||(f=64)),r.push(n[u],n[l],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const i=t[n++];e[r++]=String.fromCharCode((31&o)<<6|63&i)}else if(o>239&&o<365){const i=((7&o)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((15&o)<<12|(63&i)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let e=0;e<t.length;){const o=n[t.charAt(e++)],i=e<t.length?n[t.charAt(e)]:0;++e;const a=e<t.length?n[t.charAt(e)]:64;++e;const s=e<t.length?n[t.charAt(e)]:64;if(++e,null==o||null==i||null==a||null==s)throw new c;const u=o<<2|i>>4;if(r.push(u),64!==a){const t=i<<4&240|a>>2;if(r.push(t),64!==s){const t=a<<6&192|s;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class c extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const u=function(t){return function(t){const e=a(t);return s.encodeByteArray(e,!0)}(t).replace(/\./g,"")},l=function(t){try{return s.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const f=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,p=()=>{try{return f()||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&l(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},h=()=>{var t;return null===(t=p())||void 0===t?void 0:t.config};class d{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function g(){try{return"object"==typeof indexedDB}catch(t){return!1}}function y(){return new Promise(((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var t;e((null===(t=o.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}class v extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,v.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,m.prototype.create)}}class m{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,o=this.errors[t],i=o?function(t,e){return t.replace(b,((t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`}))}(o,n):"Error",a=`${this.serviceName}: ${i} (${r}).`;return new v(r,a,n)}}const b=/\{\$([^}]+)}/g;function w(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const n=t[o],i=e[o];if(_(n)&&_(i)){if(!w(n,i))return!1}else if(n!==i)return!1}for(const t of r)if(!n.includes(t))return!1;return!0}function _(t){return null!==t&&"object"==typeof t}function S(t){return t&&t._delegate?t._delegate:t}class k{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const E="[DEFAULT]";class I{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new d;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:E})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=E){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=E){return this.instances.has(t)}getOptions(t=E){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(t)&&e.resolve(r)}return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),o=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;o.add(t),this.onInitCallbacks.set(r,o);const i=this.instances.get(r);return i&&t(i,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===E?void 0:r),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var r;return n||null}normalizeInstanceIdentifier(t=E){return this.component?this.component.multipleInstances?t:E:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class O{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new I(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const T=[];var x;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(x||(x={}));const C={debug:x.DEBUG,verbose:x.VERBOSE,info:x.INFO,warn:x.WARN,error:x.ERROR,silent:x.SILENT},L=x.INFO,P={[x.DEBUG]:"log",[x.VERBOSE]:"log",[x.INFO]:"info",[x.WARN]:"warn",[x.ERROR]:"error"},j=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),o=P[e];if(!o)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[o](`[${r}]  ${t.name}:`,...n)};let D,N;const A=new WeakMap,M=new WeakMap,R=new WeakMap,F=new WeakMap,B=new WeakMap;let H={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return M.get(t);if("objectStoreNames"===e)return t.objectStoreNames||R.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function K(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(N||(N=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(U(this),e),$(A.get(this))}:function(...e){return $(t.apply(U(this),e))}:function(e,...n){const r=t.call(U(this),e,...n);return R.set(r,e.sort?e.sort():[e]),$(r)}}function W(t){return"function"==typeof t?K(t):(t instanceof IDBTransaction&&function(t){if(M.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{e(),r()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)}));M.set(t,e)}(t),e=t,(D||(D=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>e instanceof t))?new Proxy(t,H):t);var e}function $(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{e($(t.result)),r()},i=()=>{n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",i)}));return e.then((e=>{e instanceof IDBCursor&&A.set(e,t)})).catch((()=>{})),B.set(e,t),e}(t);if(F.has(t))return F.get(t);const e=W(t);return e!==t&&(F.set(t,e),B.set(e,t)),e}const U=t=>B.get(t);function G(t,e,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const a=indexedDB.open(t,e),s=$(a);return r&&a.addEventListener("upgradeneeded",(t=>{r($(a.result),t.oldVersion,t.newVersion,$(a.transaction),t)})),n&&a.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),s.then((t=>{i&&t.addEventListener("close",(()=>i())),o&&t.addEventListener("versionchange",(t=>o(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),s}function V(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",(t=>e(t.oldVersion,t))),$(n).then((()=>{}))}const z=["get","getKey","getAll","getAllKeys","count"],q=["put","add","delete","clear"],Y=new Map;function J(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Y.get(e))return Y.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=q.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!z.includes(n))return;const i=async function(t,...e){const i=this.transaction(t,o?"readwrite":"readonly");let a=i.store;return r&&(a=a.index(e.shift())),(await Promise.all([a[n](...e),o&&i.done]))[0]};return Y.set(e,i),i}H=(t=>({...t,get:(e,n,r)=>J(e,n)||t.get(e,n,r),has:(e,n)=>!!J(e,n)||t.has(e,n)}))(H);class Q{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const X="@firebase/app",Z="0.10.15",tt=new class{constructor(t){this.name=t,this._logLevel=L,this._logHandler=j,this._userLogHandler=null,T.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in x))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?C[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,x.DEBUG,...t),this._logHandler(this,x.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,x.VERBOSE,...t),this._logHandler(this,x.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,x.INFO,...t),this._logHandler(this,x.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,x.WARN,...t),this._logHandler(this,x.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,x.ERROR,...t),this._logHandler(this,x.ERROR,...t)}}("@firebase/app"),et="@firebase/app-compat",nt="@firebase/analytics-compat",rt="@firebase/analytics",ot="@firebase/app-check-compat",it="@firebase/app-check",at="@firebase/auth",st="@firebase/auth-compat",ct="@firebase/database",ut="@firebase/data-connect",lt="@firebase/database-compat",ft="@firebase/functions",pt="@firebase/functions-compat",ht="@firebase/installations",dt="@firebase/installations-compat",gt="@firebase/messaging",yt="@firebase/messaging-compat",vt="@firebase/performance",mt="@firebase/performance-compat",bt="@firebase/remote-config",wt="@firebase/remote-config-compat",_t="@firebase/storage",St="@firebase/storage-compat",kt="@firebase/firestore",Et="@firebase/vertexai",It="@firebase/firestore-compat",Ot="firebase",Tt="[DEFAULT]",xt={[X]:"fire-core",[et]:"fire-core-compat",[rt]:"fire-analytics",[nt]:"fire-analytics-compat",[it]:"fire-app-check",[ot]:"fire-app-check-compat",[at]:"fire-auth",[st]:"fire-auth-compat",[ct]:"fire-rtdb",[ut]:"fire-data-connect",[lt]:"fire-rtdb-compat",[ft]:"fire-fn",[pt]:"fire-fn-compat",[ht]:"fire-iid",[dt]:"fire-iid-compat",[gt]:"fire-fcm",[yt]:"fire-fcm-compat",[vt]:"fire-perf",[mt]:"fire-perf-compat",[bt]:"fire-rc",[wt]:"fire-rc-compat",[_t]:"fire-gcs",[St]:"fire-gcs-compat",[kt]:"fire-fst",[It]:"fire-fst-compat",[Et]:"fire-vertex","fire-js":"fire-js",[Ot]:"fire-js-all"},Ct=new Map,Lt=new Map,Pt=new Map;function jt(t,e){try{t.container.addComponent(e)}catch(n){tt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Dt(t){const e=t.name;if(Pt.has(e))return tt.debug(`There were multiple attempts to register component ${e}.`),!1;Pt.set(e,t);for(const e of Ct.values())jt(e,t);for(const e of Lt.values())jt(e,t);return!0}function Nt(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const At=new m("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Mt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new k("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw At.create("app-deleted",{appName:this._name})}}function Rt(t,e={}){let n=t;if("object"!=typeof e){e={name:e}}const r=Object.assign({name:Tt,automaticDataCollectionEnabled:!1},e),o=r.name;if("string"!=typeof o||!o)throw At.create("bad-app-name",{appName:String(o)});if(n||(n=h()),!n)throw At.create("no-options");const i=Ct.get(o);if(i){if(w(n,i.options)&&w(r,i.config))return i;throw At.create("duplicate-app",{appName:o})}const a=new O(o);for(const t of Pt.values())a.addComponent(t);const s=new Mt(n,r,a);return Ct.set(o,s),s}function Ft(t=Tt){const e=Ct.get(t);if(!e&&t===Tt&&h())return Rt();if(!e)throw At.create("no-app",{appName:t});return e}function Bt(t,e,n){var r;let o=null!==(r=xt[t])&&void 0!==r?r:t;n&&(o+=`-${n}`);const i=o.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const t=[`Unable to register library "${o}" with version "${e}":`];return i&&t.push(`library name "${o}" contains illegal characters (whitespace or "/")`),i&&a&&t.push("and"),a&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void tt.warn(t.join(" "))}Dt(new k(`${o}-version`,(()=>({library:o,version:e})),"VERSION"))}const Ht="firebase-heartbeat-store";let Kt=null;function Wt(){return Kt||(Kt=G("firebase-heartbeat-database",1,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(Ht)}catch(t){console.warn(t)}}}).catch((t=>{throw At.create("idb-open",{originalErrorMessage:t.message})}))),Kt}async function $t(t,e){try{const n=(await Wt()).transaction(Ht,"readwrite"),r=n.objectStore(Ht);await r.put(e,Ut(t)),await n.done}catch(t){if(t instanceof v)tt.warn(t.message);else{const e=At.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});tt.warn(e.message)}}}function Ut(t){return`${t.name}!${t.options.appId}`}class Gt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new zt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Vt();if(null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((t=>t.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(t){tt.warn(t)}}async getHeartbeatsHeader(){var t;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=Vt(),{heartbeatsToSend:n,unsentEntries:r}=function(t,e=1024){const n=[];let r=t.slice();for(const o of t){const t=n.find((t=>t.agent===o.agent));if(t){if(t.dates.push(o.date),qt(n)>e){t.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),qt(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),o=u(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return tt.warn(t),""}}}function Vt(){return(new Date).toISOString().substring(0,10)}class zt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!g()&&y().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await Wt()).transaction(Ht),n=await e.objectStore(Ht).get(Ut(t));return await e.done,n}catch(t){if(t instanceof v)tt.warn(t.message);else{const e=At.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});tt.warn(e.message)}}}(this.app);return(null==t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return $t(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return $t(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function qt(t){return u(JSON.stringify({version:2,heartbeats:t})).length}var Yt;Yt="",Dt(new k("platform-logger",(t=>new Q(t)),"PRIVATE")),Dt(new k("heartbeat",(t=>new Gt(t)),"PRIVATE")),Bt(X,Z,Yt),Bt(X,Z,"esm2017"),Bt("fire-js","");Bt("firebase","11.0.1","app");const Jt="@firebase/installations",Qt="0.6.10",Xt=1e4,Zt=`w:${Qt}`,te="FIS_v2",ee=36e5,ne=new m("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function re(t){return t instanceof v&&t.code.includes("request-failed")}function oe({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function ie(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function ae(t,e){const n=(await e.json()).error;return ne.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function se({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ce(t,{refreshToken:e}){const n=se(t);return n.append("Authorization",function(t){return`${te} ${t}`}(e)),n}async function ue(t){const e=await t();return e.status>=500&&e.status<600?t():e}function le(t){return new Promise((e=>{setTimeout(e,t)}))}const fe=/^[cdef][\w-]{21}$/;function pe(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){const e=(n=t,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return e.substr(0,22)}(t);return fe.test(e)?e:""}catch(t){return""}}function he(t){return`${t.appName}!${t.appId}`}const de=new Map;function ge(t,e){const n=he(t);ye(n,e),function(t,e){const n=me();n&&n.postMessage({key:t,fid:e});be()}(n,e)}function ye(t,e){const n=de.get(t);if(n)for(const t of n)t(e)}let ve=null;function me(){return!ve&&"BroadcastChannel"in self&&(ve=new BroadcastChannel("[Firebase] FID Change"),ve.onmessage=t=>{ye(t.data.key,t.data.fid)}),ve}function be(){0===de.size&&ve&&(ve.close(),ve=null)}const we="firebase-installations-store";let _e=null;function Se(){return _e||(_e=G("firebase-installations-database",1,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(we)}})),_e}async function ke(t,e){const n=he(t),r=(await Se()).transaction(we,"readwrite"),o=r.objectStore(we),i=await o.get(n);return await o.put(e,n),await r.done,i&&i.fid===e.fid||ge(t,e.fid),e}async function Ee(t){const e=he(t),n=(await Se()).transaction(we,"readwrite");await n.objectStore(we).delete(e),await n.done}async function Ie(t,e){const n=he(t),r=(await Se()).transaction(we,"readwrite"),o=r.objectStore(we),i=await o.get(n),a=e(i);return void 0===a?await o.delete(n):await o.put(a,n),await r.done,!a||i&&i.fid===a.fid||ge(t,a.fid),a}async function Oe(t){let e;const n=await Ie(t.appConfig,(n=>{const r=function(t){const e=t||{fid:pe(),registrationStatus:0};return Ce(e)}(n),o=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine){return{installationEntry:e,registrationPromise:Promise.reject(ne.create("app-offline"))}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(t,e){try{const n=await async function({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=oe(t),o=se(t),i=e.getImmediate({optional:!0});if(i){const t=await i.getHeartbeatsHeader();t&&o.append("x-firebase-client",t)}const a={fid:n,authVersion:te,appId:t.appId,sdkVersion:Zt},s={method:"POST",headers:o,body:JSON.stringify(a)},c=await ue((()=>fetch(r,s)));if(c.ok){const t=await c.json();return{fid:t.fid||n,registrationStatus:2,refreshToken:t.refreshToken,authToken:ie(t.authToken)}}throw await ae("Create Installation",c)}(t,e);return ke(t.appConfig,n)}catch(n){throw re(n)&&409===n.customData.serverCode?await Ee(t.appConfig):await ke(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Te(t)}:{installationEntry:e}}(t,r);return e=o.registrationPromise,o.installationEntry}));return""===n.fid?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}async function Te(t){let e=await xe(t.appConfig);for(;1===e.registrationStatus;)await le(100),e=await xe(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await Oe(t);return n||e}return e}function xe(t){return Ie(t,(t=>{if(!t)throw ne.create("installation-not-found");return Ce(t)}))}function Ce(t){return 1===(e=t).registrationStatus&&e.registrationTime+Xt<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}async function Le({appConfig:t,heartbeatServiceProvider:e},n){const r=function(t,{fid:e}){return`${oe(t)}/${e}/authTokens:generate`}(t,n),o=ce(t,n),i=e.getImmediate({optional:!0});if(i){const t=await i.getHeartbeatsHeader();t&&o.append("x-firebase-client",t)}const a={installation:{sdkVersion:Zt,appId:t.appId}},s={method:"POST",headers:o,body:JSON.stringify(a)},c=await ue((()=>fetch(r,s)));if(c.ok){return ie(await c.json())}throw await ae("Generate Auth Token",c)}async function Pe(t,e=!1){let n;const r=await Ie(t.appConfig,(r=>{if(!De(r))throw ne.create("not-registered");const o=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+ee}(t)}(o))return r;if(1===o.requestStatus)return n=async function(t,e){let n=await je(t.appConfig);for(;1===n.authToken.requestStatus;)await le(100),n=await je(t.appConfig);const r=n.authToken;return 0===r.requestStatus?Pe(t,e):r}(t,e),r;{if(!navigator.onLine)throw ne.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(r);return n=async function(t,e){try{const n=await Le(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await ke(t.appConfig,r),n}catch(n){if(!re(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ke(t.appConfig,n)}else await Ee(t.appConfig);throw n}}(t,e),e}}));return n?await n:r.authToken}function je(t){return Ie(t,(t=>{if(!De(t))throw ne.create("not-registered");const e=t.authToken;return 1===(n=e).requestStatus&&n.requestTime+Xt<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var n}))}function De(t){return void 0!==t&&2===t.registrationStatus}async function Ne(t,e=!1){const n=t;await async function(t){const{registrationPromise:e}=await Oe(t);e&&await e}(n);return(await Pe(n,e)).token}function Ae(t){return ne.create("missing-app-config-values",{valueName:t})}const Me="installations",Re=t=>{const e=Nt(t.getProvider("app").getImmediate(),Me).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:n,registrationPromise:r}=await Oe(e);return r?r.catch(console.error):Pe(e).catch(console.error),n.fid}(e),getToken:t=>Ne(e,t)}};Dt(new k(Me,(t=>{const e=t.getProvider("app").getImmediate(),n=function(t){if(!t||!t.options)throw Ae("App Configuration");if(!t.name)throw Ae("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Ae(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:Nt(e,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),Dt(new k("installations-internal",Re,"PRIVATE")),Bt(Jt,Qt),Bt(Jt,Qt,"esm2017");const Fe="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Be="google.c.a.c_id";var He,Ke;function We(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $e(t){const e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length);for(let t=0;t<n.length;++t)r[t]=n.charCodeAt(t);return r}!function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(He||(He={})),function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(Ke||(Ke={}));const Ue="fcm_token_details_db",Ge="fcm_token_object_Store";const Ve="firebase-messaging-store";let ze=null;function qe(){return ze||(ze=G("firebase-messaging-database",1,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(Ve)}})),ze}async function Ye(t){const e=Qe(t),n=await qe(),r=await n.transaction(Ve).objectStore(Ve).get(e);if(r)return r;{const e=await async function(t){if("databases"in indexedDB){const t=(await indexedDB.databases()).map((t=>t.name));if(!t.includes(Ue))return null}let e=null;return(await G(Ue,5,{upgrade:async(n,r,o,i)=>{var a;if(r<2)return;if(!n.objectStoreNames.contains(Ge))return;const s=i.objectStore(Ge),c=await s.index("fcmSenderId").get(t);if(await s.clear(),c)if(2===r){const t=c;if(!t.auth||!t.p256dh||!t.endpoint)return;e={token:t.fcmToken,createTime:null!==(a=t.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:t.auth,p256dh:t.p256dh,endpoint:t.endpoint,swScope:t.swScope,vapidKey:"string"==typeof t.vapidKey?t.vapidKey:We(t.vapidKey)}}}else if(3===r){const t=c;e={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:We(t.auth),p256dh:We(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:We(t.vapidKey)}}}else if(4===r){const t=c;e={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:We(t.auth),p256dh:We(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:We(t.vapidKey)}}}}})).close(),await V(Ue),await V("fcm_vapid_details_db"),await V("undefined"),function(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null}(t.appConfig.senderId);if(e)return await Je(t,e),e}}async function Je(t,e){const n=Qe(t),r=(await qe()).transaction(Ve,"readwrite");return await r.objectStore(Ve).put(e,n),await r.done,e}function Qe({appConfig:t}){return t.appId}const Xe=new m("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function Ze(t,e){const n={method:"DELETE",headers:await en(t)};try{const r=await fetch(`${tn(t.appConfig)}/${e}`,n),o=await r.json();if(o.error){const t=o.error.message;throw Xe.create("token-unsubscribe-failed",{errorInfo:t})}}catch(t){throw Xe.create("token-unsubscribe-failed",{errorInfo:null==t?void 0:t.toString()})}}function tn({projectId:t}){return`https://fcmregistrations.googleapis.com/v1/projects/${t}/registrations`}async function en({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function nn({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const o={web:{endpoint:n,auth:e,p256dh:t}};return r!==Fe&&(o.web.applicationPubKey=r),o}async function rn(t){const e=await async function(t,e){const n=await t.pushManager.getSubscription();if(n)return n;return t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$e(e)})}(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:We(e.getKey("auth")),p256dh:We(e.getKey("p256dh"))},r=await Ye(t.firebaseDependencies);if(r){if(function(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,o=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&r&&o&&i}(r.subscriptionOptions,n))return Date.now()>=r.createTime+6048e5?async function(t,e){try{const n=await async function(t,e){const n=await en(t),r=nn(e.subscriptionOptions),o={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{const n=await fetch(`${tn(t.appConfig)}/${e.token}`,o);i=await n.json()}catch(t){throw Xe.create("token-update-failed",{errorInfo:null==t?void 0:t.toString()})}if(i.error){const t=i.error.message;throw Xe.create("token-update-failed",{errorInfo:t})}if(!i.token)throw Xe.create("token-update-no-token");return i.token}(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await Je(t.firebaseDependencies,r),n}catch(t){throw t}}(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await Ze(t.firebaseDependencies,r.token)}catch(t){console.warn(t)}return on(t.firebaseDependencies,n)}return on(t.firebaseDependencies,n)}async function on(t,e){const n=await async function(t,e){const n=await en(t),r=nn(e),o={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{const e=await fetch(tn(t.appConfig),o);i=await e.json()}catch(t){throw Xe.create("token-subscribe-failed",{errorInfo:null==t?void 0:t.toString()})}if(i.error){const t=i.error.message;throw Xe.create("token-subscribe-failed",{errorInfo:t})}if(!i.token)throw Xe.create("token-subscribe-no-token");return i.token}(t,e),r={token:n,createTime:Date.now(),subscriptionOptions:e};return await Je(t,r),r.token}function an(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const o=e.notification.image;o&&(t.notification.image=o);const i=e.notification.icon;i&&(t.notification.icon=i)}(e,t),function(t,e){if(!e.data)return;t.data=e.data}(e,t),function(t,e){var n,r,o,i,a;if(!e.fcmOptions&&!(null===(n=e.notification)||void 0===n?void 0:n.click_action))return;t.fcmOptions={};const s=null!==(o=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==o?o:null===(i=e.notification)||void 0===i?void 0:i.click_action;s&&(t.fcmOptions.link=s);const c=null===(a=e.fcmOptions)||void 0===a?void 0:a.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}(e,t),e}function sn(t){return Xe.create("missing-app-config-values",{valueName:t})}!function(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));n.join("")}("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class cn{constructor(t,e,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(t){if(!t||!t.options)throw sn("App Configuration Object");if(!t.name)throw sn("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const t of e)if(!n[t])throw sn(t);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:r,installations:e,analyticsProvider:n}}_delete(){return Promise.resolve()}}async function un(t){try{t.swRegistration=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),t.swRegistration.update().catch((()=>{}))}catch(t){throw Xe.create("failed-service-worker-registration",{browserErrorMessage:null==t?void 0:t.message})}}async function ln(t,e){if(!navigator)throw Xe.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw Xe.create("permission-blocked");return await async function(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=Fe)}(t,null==e?void 0:e.vapidKey),await async function(t,e){if(e||t.swRegistration||await un(t),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Xe.create("invalid-sw-registration");t.swRegistration=e}}(t,null==e?void 0:e.serviceWorkerRegistration),rn(t)}async function fn(t,e,n){const r=function(t){switch(t){case Ke.NOTIFICATION_CLICKED:return"notification_open";case Ke.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[Be],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}async function pn(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Ke.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(an(n)):t.onMessageHandler.next(an(n)));const r=n.data;var o;"object"==typeof(o=r)&&o&&Be in o&&"1"===r["google.c.a.e"]&&await fn(t,n.messageType,r)}const hn="@firebase/messaging",dn="0.12.13",gn=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:t=>ln(e,t)}};async function yn(){try{await y()}catch(t){return!1}return"undefined"!=typeof window&&g()&&!("undefined"==typeof navigator||!navigator.cookieEnabled)&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function vn(t=Ft()){return yn().then((t=>{if(!t)throw Xe.create("unsupported-browser")}),(t=>{throw Xe.create("indexed-db-unsupported")})),Nt(S(t),"messaging").getImmediate()}async function mn(t,e){return ln(t=S(t),e)}function bn(t,e){return function(t,e){if(!navigator)throw Xe.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}(t=S(t),e)}Dt(new k("messaging",(t=>{const e=new cn(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(t=>pn(e,t))),e}),"PUBLIC")),Dt(new k("messaging-internal",gn,"PRIVATE")),Bt(hn,dn),Bt(hn,dn,"esm2017");const wn="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",_n="FCM_MSG";var Sn,kn;function En(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function In(t){const e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length);for(let t=0;t<n.length;++t)r[t]=n.charCodeAt(t);return r}!function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(Sn||(Sn={})),function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(kn||(kn={}));const On="fcm_token_details_db",Tn="fcm_token_object_Store";const xn="firebase-messaging-store";let Cn=null;function Ln(){return Cn||(Cn=G("firebase-messaging-database",1,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(xn)}})),Cn}async function Pn(t){const e=Dn(t),n=await Ln(),r=await n.transaction(xn).objectStore(xn).get(e);if(r)return r;{const e=await async function(t){if("databases"in indexedDB){const t=(await indexedDB.databases()).map((t=>t.name));if(!t.includes(On))return null}let e=null;return(await G(On,5,{upgrade:async(n,r,o,i)=>{var a;if(r<2)return;if(!n.objectStoreNames.contains(Tn))return;const s=i.objectStore(Tn),c=await s.index("fcmSenderId").get(t);if(await s.clear(),c)if(2===r){const t=c;if(!t.auth||!t.p256dh||!t.endpoint)return;e={token:t.fcmToken,createTime:null!==(a=t.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:t.auth,p256dh:t.p256dh,endpoint:t.endpoint,swScope:t.swScope,vapidKey:"string"==typeof t.vapidKey?t.vapidKey:En(t.vapidKey)}}}else if(3===r){const t=c;e={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:En(t.auth),p256dh:En(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:En(t.vapidKey)}}}else if(4===r){const t=c;e={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:En(t.auth),p256dh:En(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:En(t.vapidKey)}}}}})).close(),await V(On),await V("fcm_vapid_details_db"),await V("undefined"),function(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null}(t.appConfig.senderId);if(e)return await jn(t,e),e}}async function jn(t,e){const n=Dn(t),r=(await Ln()).transaction(xn,"readwrite");return await r.objectStore(xn).put(e,n),await r.done,e}function Dn({appConfig:t}){return t.appId}const Nn=new m("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function An(t,e){const n={method:"DELETE",headers:await Rn(t)};try{const r=await fetch(`${Mn(t.appConfig)}/${e}`,n),o=await r.json();if(o.error){const t=o.error.message;throw Nn.create("token-unsubscribe-failed",{errorInfo:t})}}catch(t){throw Nn.create("token-unsubscribe-failed",{errorInfo:null==t?void 0:t.toString()})}}function Mn({projectId:t}){return`https://fcmregistrations.googleapis.com/v1/projects/${t}/registrations`}async function Rn({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function Fn({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const o={web:{endpoint:n,auth:e,p256dh:t}};return r!==wn&&(o.web.applicationPubKey=r),o}async function Bn(t){const e=await async function(t,e){const n=await t.pushManager.getSubscription();if(n)return n;return t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:In(e)})}(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:En(e.getKey("auth")),p256dh:En(e.getKey("p256dh"))},r=await Pn(t.firebaseDependencies);if(r){if(function(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,o=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&r&&o&&i}(r.subscriptionOptions,n))return Date.now()>=r.createTime+6048e5?async function(t,e){try{const n=await async function(t,e){const n=await Rn(t),r=Fn(e.subscriptionOptions),o={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{const n=await fetch(`${Mn(t.appConfig)}/${e.token}`,o);i=await n.json()}catch(t){throw Nn.create("token-update-failed",{errorInfo:null==t?void 0:t.toString()})}if(i.error){const t=i.error.message;throw Nn.create("token-update-failed",{errorInfo:t})}if(!i.token)throw Nn.create("token-update-no-token");return i.token}(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await jn(t.firebaseDependencies,r),n}catch(t){throw t}}(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await An(t.firebaseDependencies,r.token)}catch(t){console.warn(t)}return Kn(t.firebaseDependencies,n)}return Kn(t.firebaseDependencies,n)}async function Hn(t){const e=await Pn(t.firebaseDependencies);e&&(await An(t.firebaseDependencies,e.token),await async function(t){const e=Dn(t),n=(await Ln()).transaction(xn,"readwrite");await n.objectStore(xn).delete(e),await n.done}(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}async function Kn(t,e){const n=await async function(t,e){const n=await Rn(t),r=Fn(e),o={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{const e=await fetch(Mn(t.appConfig),o);i=await e.json()}catch(t){throw Nn.create("token-subscribe-failed",{errorInfo:null==t?void 0:t.toString()})}if(i.error){const t=i.error.message;throw Nn.create("token-subscribe-failed",{errorInfo:t})}if(!i.token)throw Nn.create("token-subscribe-no-token");return i.token}(t,e),r={token:n,createTime:Date.now(),subscriptionOptions:e};return await jn(t,r),r.token}async function Wn(t,e){const n=function(t,e){var n,r;const o={};t.from&&(o.project_number=t.from);t.fcmMessageId&&(o.message_id=t.fcmMessageId);o.instance_id=e,t.notification?o.message_type=Sn.DISPLAY_NOTIFICATION.toString():o.message_type=Sn.DATA_MESSAGE.toString();o.sdk_platform=3..toString(),o.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),!t.collapse_key||(o.collapse_key=t.collapse_key);o.event=1..toString(),!(null===(n=t.fcmOptions)||void 0===n?void 0:n.analytics_label)||(o.analytics_label=null===(r=t.fcmOptions)||void 0===r?void 0:r.analytics_label);return o}(e,await t.firebaseDependencies.installations.getId());!function(t,e,n){const r={};r.event_time_ms=Math.floor(Date.now()).toString(),r.source_extension_json_proto3=JSON.stringify({messaging_client_event:e}),!n||(r.compliance_data=function(t){const e={privacy_context:{prequest:{origin_associated_product_id:t}}};return e}(n));t.logEvents.push(r)}(t,n,e.productId)}async function $n(t,e){const n=function({data:t}){if(!t)return null;try{return t.json()}catch(t){return null}}(t);if(!n)return;e.deliveryMetricsExportedToBigQueryEnabled&&await Wn(e,n);const r=await Gn();if(function(t){return t.some((t=>"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")))}(r))return function(t,e){e.isFirebaseMessaging=!0,e.messageType=kn.PUSH_RECEIVED;for(const n of t)n.postMessage(e)}(r,n);if(n.notification&&await function(t){var e;const{actions:n}=t,{maxActions:r}=Notification;n&&r&&n.length>r&&console.warn(`This browser only supports ${r} actions. The remaining actions will not be displayed.`);return self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}(function(t){const e=Object.assign({},t.notification);return e.data={[_n]:t},e}(n)),e&&e.onBackgroundMessageHandler){const t=function(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const o=e.notification.image;o&&(t.notification.image=o);const i=e.notification.icon;i&&(t.notification.icon=i)}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){var n,r,o,i,a;if(!e.fcmOptions&&!(null===(n=e.notification)||void 0===n?void 0:n.click_action))return;t.fcmOptions={};const s=null!==(o=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==o?o:null===(i=e.notification)||void 0===i?void 0:i.click_action;s&&(t.fcmOptions.link=s);const c=null===(a=e.fcmOptions)||void 0===a?void 0:a.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}(e,t),e}(n);"function"==typeof e.onBackgroundMessageHandler?await e.onBackgroundMessageHandler(t):e.onBackgroundMessageHandler.next(t)}}async function Un(t){var e,n;const r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n[_n];if(!r)return;if(t.action)return;t.stopImmediatePropagation(),t.notification.close();const o=function(t){var e,n,r;const o=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;if(o)return o;return i=t.data,"object"==typeof i&&i&&"google.c.a.c_id"in i?self.location.origin:null;var i}(r);if(!o)return;const i=new URL(o,self.location.href),a=new URL(self.location.origin);if(i.host!==a.host)return;let s=await async function(t){const e=await Gn();for(const n of e){const e=new URL(n.url,self.location.href);if(t.host===e.host)return n}return null}(i);var c;return s?s=await s.focus():(s=await self.clients.openWindow(o),await(c=3e3,new Promise((t=>{setTimeout(t,c)})))),s?(r.messageType=kn.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,s.postMessage(r)):void 0}function Gn(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Vn(t){return Nn.create("missing-app-config-values",{valueName:t})}!function(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));n.join("")}("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class zn{constructor(t,e,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(t){if(!t||!t.options)throw Vn("App Configuration Object");if(!t.name)throw Vn("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const t of e)if(!n[t])throw Vn(t);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:r,installations:e,analyticsProvider:n}}_delete(){return Promise.resolve()}}function qn(t=Ft()){return async function(){return g()&&await y()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}().then((t=>{if(!t)throw Nn.create("unsupported-browser")}),(t=>{throw Nn.create("indexed-db-unsupported")})),Nt(S(t),"messaging-sw").getImmediate()}function Yn(t,e){return function(t,e){if(void 0!==self.document)throw Nn.create("only-available-in-sw");return t.onBackgroundMessageHandler=e,()=>{t.onBackgroundMessageHandler=null}}(t=S(t),e)}Dt(new k("messaging-sw",(t=>{const e=new zn(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return self.addEventListener("push",(t=>{t.waitUntil($n(t,e))})),self.addEventListener("pushsubscriptionchange",(t=>{t.waitUntil(async function(t,e){var n,r;const{newSubscription:o}=t;if(!o)return void await Hn(e);const i=await Pn(e.firebaseDependencies);await Hn(e),e.vapidKey=null!==(r=null===(n=null==i?void 0:i.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==r?r:wn,await Bn(e)}(t,e))})),self.addEventListener("notificationclick",(t=>{t.waitUntil(Un(t))})),e}),"PUBLIC"));var Jn=n(293),Qn=n.n(Jn);function Xn(t){return Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xn(t)}function Zn(){Zn=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new L(r||[]);return o(a,"_invoke",{value:O(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",g="completed",y={};function v(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var _=Object.getPrototypeOf,S=_&&_(_(P([])));S&&S!==n&&r.call(S,a)&&(w=S);var k=b.prototype=v.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Xn(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,n,r){var o=p;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=T(s,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(e,n,r);if("normal"===u.type){if(o=r.done?g:h,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=g,r.method="throw",r.arg=u.arg)}}}function T(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function P(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(Xn(e)+" is not iterable")}return m.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(I.prototype),u(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new I(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(k),u(k,c,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function tr(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function er(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nr(r.key),r)}}function nr(t){var e=function(t,e){if("object"!=Xn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Xn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xn(e)?e:e+""}var rr=function(){return t=function t(){var e,n,r,o=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).baseUrl,i=void 0===o?"/api/v1/event":o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,r=void 0,(n=nr(n="baseUrl"))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,this.baseUrl=i},e=[{key:"sendEvent",value:(r=Zn().mark((function t(e){var n;return Zn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.eventUri.startsWith("/")){t.next=2;break}throw new Error("event.eventUri must start with a slash");case 2:return n=new URL("".concat(this.baseUrl).concat(e.eventUri)),t.next=5,fetch(n.toString(),{method:"POST",body:JSON.stringify(e.data),keepalive:!0,headers:{"Content-Type":"application/json"}});case 5:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){tr(i,n,o,a,s,"next",t)}function s(t){tr(i,n,o,a,s,"throw",t)}a(void 0)}))},function(t){return o.apply(this,arguments)})}],e&&er(t.prototype,e),n&&er(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,o}();function or(t){return or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},or(t)}function ir(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ar(r.key),r)}}function ar(t){var e=function(t,e){if("object"!=or(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=or(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==or(e)?e:e+""}function sr(t){return sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sr(t)}function cr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ur(r.key),r)}}function ur(t){var e=function(t,e){if("object"!=sr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=sr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sr(e)?e:e+""}function lr(t,e,n){return e=pr(e),function(t,e){if(e&&("object"==sr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,fr()?Reflect.construct(e,n||[],pr(t).constructor):e.apply(t,n))}function fr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(fr=function(){return!!t})()}function pr(t){return pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pr(t)}function hr(t,e){return hr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hr(t,e)}var dr=function(t){function e(t){var n,r=t.web_push_account_id,o=t.web_push_message_id,i=t.account_token;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=lr(this,e)).eventUri="/click",n.web_push_account_id=Number(r),n.web_push_message_id=Number(o),n.account_token=i,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hr(t,e)}(e,t),n=e,(r=[{key:"data",get:function(){return{web_push_account_id:this.web_push_account_id,web_push_message_id:this.web_push_message_id,account_token:this.account_token}}}])&&cr(n.prototype,r),o&&cr(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(function(){return t=function t(){var e,n,r;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,r=void 0,(n=ar(n="eventUri"))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,this.constructor===t)throw new Error("this is an abstract class")},(e=[{key:"data",get:function(){throw new Error("The data property must be implemented")}}])&&ir(t.prototype,e),n&&ir(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}());function gr(t){return gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gr(t)}function yr(){yr=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new L(r||[]);return o(a,"_invoke",{value:O(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",g="completed",y={};function v(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var _=Object.getPrototypeOf,S=_&&_(_(P([])));S&&S!==n&&r.call(S,a)&&(w=S);var k=b.prototype=v.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==gr(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,n,r){var o=p;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=T(s,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(e,n,r);if("normal"===u.type){if(o=r.done?g:h,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=g,r.method="throw",r.arg=u.arg)}}}function T(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function P(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(gr(e)+" is not iterable")}return m.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(I.prototype),u(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new I(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(k),u(k,c,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function vr(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function mr(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){vr(i,r,o,a,s,"next",t)}function s(t){vr(i,r,o,a,s,"throw",t)}a(void 0)}))}}function br(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wr(r.key),r)}}function wr(t){var e=function(t,e){if("object"!=gr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=gr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gr(e)?e:e+""}function _r(t,e,n){return e=kr(e),function(t,e){if(e&&("object"==gr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Sr()?Reflect.construct(e,n||[],kr(t).constructor):e.apply(t,n))}function Sr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Sr=function(){return!!t})()}function kr(t){return kr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kr(t)}function Er(t,e){return Er=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Er(t,e)}var Ir=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=_r(this,e)).app=Rt(Qn().FIREBASE_CONFIG),t.vapidKey=Qn().FIREBASE_CONFIG.vapidKey,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Er(t,e)}(e,t),n=e,r=[{key:"_showNotification",value:function(t){var e=t.data,n=e.title,r=e.body,o=e.actionUrl,i=e.icon;new Notification(n,{body:r,icon:i}).onclick=function(t){t.preventDefault(),window.open(o,"_blank").focus()}}},{key:"_showNotificationServiceWorker",value:function(t,e){var n=t.data,r=n.title,o=n.body,i=n.actionUrl,a=n.icon,s=n.buttonLabel,c={body:o,data:{actionUrl:i,webPushAccountId:n.webPushAccountId,webPushMessageId:n.webPushMessageId,accountToken:n.accountToken},actions:[]};return a&&(c.icon=a),s&&c.actions.push({action:"default",title:s}),e.registration.showNotification(r,c)}},{key:"getServiceToken",value:(a=mr(yr().mark((function t(e){var n;return yr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,mn(vn(this.app),{serviceWorkerRegistration:e,vapidKey:this.vapidKey});case 3:if(n=t.sent){t.next=6;break}return t.abrupt("return",Promise.resolve({status:"NO_PERMISSION"}));case 6:return t.abrupt("return",Promise.resolve({status:"SUCCESS",token:n}));case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",Promise.resolve({status:"ERROR",error:t.t0}));case 12:case"end":return t.stop()}}),t,this,[[0,9]])}))),function(t){return a.apply(this,arguments)})},{key:"registerNotificationListener",value:(i=mr(yr().mark((function t(){return yr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,yn();case 2:t.sent?"denied"===window.Notification.permission?console.info("RD Notification: browser's notification permission is already blocked"):(bn(vn(this.app),this._showNotification),console.info("RD Notification: listening to notifications")):console.info("RD Notification: notification is not supported by the browser");case 4:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"registerNotificationServiceWorker",value:function(t){var e=this;return Yn(qn(),(function(n){return e._showNotificationServiceWorker(n,t)}))}},{key:"handleSendClickEvent",value:function(t){var e=Qn().EVENT_SERVICE_BASE_URL,n=new rr({baseUrl:e}),r=t.webPushAccountId,o=t.webPushMessageId,i=t.accountToken,a=new dr({web_push_account_id:r,web_push_message_id:o,account_token:i});return n.sendEvent(a)}},{key:"handleNotificationClick",value:function(t){var e=this,n=t.notification.data,r=n.actionUrl;t.notification.close(),t.waitUntil(clients.matchAll({type:"window",includeUncontrolled:!0}).then((function(t){if(e.handleSendClickEvent(n),!t.some((function(t){t.url===r&&t.focus()})))return clients.openWindow(r)})))}}],r&&br(n.prototype,r),o&&br(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a}(i);function Or(t){return Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Or(t)}function Tr(){Tr=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new L(r||[]);return o(a,"_invoke",{value:O(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",g="completed",y={};function v(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var _=Object.getPrototypeOf,S=_&&_(_(P([])));S&&S!==n&&r.call(S,a)&&(w=S);var k=b.prototype=v.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Or(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,n,r){var o=p;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=T(s,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(e,n,r);if("normal"===u.type){if(o=r.done?g:h,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=g,r.method="throw",r.arg=u.arg)}}}function T(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function P(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(Or(e)+" is not iterable")}return m.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(I.prototype),u(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new I(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(k),u(k,c,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function xr(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Cr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Lr(r.key),r)}}function Lr(t){var e=function(t,e){if("object"!=Or(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Or(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Or(e)?e:e+""}var Pr=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"sendToken",value:(r=Tr().mark((function t(e){var n,r;return Tr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.token,r=e.webpushAccountId,t.prev=1,t.next=4,fetch(Qn().WEBPUSHER_CONFIG.url,{method:"POST",body:JSON.stringify({web_push_account_id:r,fcm_token:n})});case 4:return t.abrupt("return",Promise.resolve({status:"SUCCESS"}));case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",Promise.resolve({status:"ERROR",error:t.t0}));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})),o=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){xr(i,n,o,a,s,"next",t)}function s(t){xr(i,n,o,a,s,"throw",t)}a(void 0)}))},function(t){return o.apply(this,arguments)})}],e&&Cr(t.prototype,e),n&&Cr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,o}(),jr="notificationPermissionLastShown",Dr="notificationPermissionIgnoredCount",Nr=function(){var t,e,n=localStorage.getItem(jr),r=localStorage.getItem(Dr)||0,o={0:0,1:3,2:7,3:30}[r],i=(t=new Date(n),e=(new Date).getTime()-t.getTime(),Math.round(e/864e5));return 0===r||i>o},Ar=function(t){return t.replace(/(www\d?\.)?/g,"")},Mr={"pt-BR":{description:"Inscreva-se para receber nossas notificaes e conferir nossas ltimas novidades.",actions:{cancel:"Agora no",confirm:"Inscreva-se"}},"en-US":{description:"Sign up to receive our notifications and stay updated with our latest news.",actions:{cancel:"Not now",confirm:"Subscribe"}},"es-ES":{description:"Suscrbete para recibir nuestras notificaciones y mantenerte al da con nuestras ltimas novedades.",actions:{cancel:"Ahora no",confirm:"Suscrbete"}}};function Rr(t){return Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rr(t)}function Fr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Br(r.key),r)}}function Br(t){var e=function(t,e){if("object"!=Rr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Rr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Rr(e)?e:e+""}var Hr=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.onConfirmCallback=function(){},this.onCancelCallback=function(){},this._language=null},(e=[{key:"_getDialogStyles",value:function(){var t=document.createElement("style");return t.innerHTML="\n\t\t\t#rd-webpush-modal {\n\t\t\t\tposition: fixed;\n\t\t\t\ttop: 0;\n\t\t\t\tz-index: 999999;\n\t\t\t\tfont-family: sans-serif;\n\t\t\t\tborder-radius: 8px;\n\t\t\t\tborder: none;\n\t\t\t\tbox-shadow: 0px 12px 24px #21242933;\n\t\t\t\tpadding: 0;\n\t\t\t\tmax-width: 485px;\n\t\t\t\tbackground-color: #ffffff;\n\t\t\t}\n\n\t\t\t.rd-webpush-modal__content {\n\t\t\t\tpadding: 24px;\n\t\t\t}\n\n\t\t\t.rd-webpush-modal__header {\n\t\t\t\tdisplay: flex;\n\t\t\t\tmargin-bottom: 24px;\n\t\t\t}\n\n\t\t\t.rd-webpush-modal__icon-container{\n\t\t\t\tpadding: 10px;\n\t\t\t\tmargin-right: 16px;\n\t\t\t}\n\n\t\t\t.rd-webpush-modal__description {\n\t\t\t\tflex: 1;\n\t\t\t\tmargin: 0;\n\t\t\t\tcolor: #212429;\n\t\t\t\tfont-size: 1rem;\n\t\t\t\tfont-weight: 400;\n\t\t\t\tline-height: 24px;\n\t\t\t}\n\n\t\t\t.rd-webpush-modal__footer {\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: flex-end;\n\t\t\t\tgap: 8px;\n\t\t\t}\n\n\t\t\t.rd-webpush-modal__button {\n\t\t\t\tpadding: 16px;\n\t\t\t\tborder: none;\n\t\t\t\tborder-radius: 4px;\n\t\t\t\tfont-size: 1rem;\n\t\t\t\tfont-weight: 700;\n\t\t\t\tcursor: pointer;\n\t\t\t\tline-height: 24px;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t}\n\n\t\t\t.rd-webpush-modal__button--subscribe {\n\t\t\t\tbackground-color: #0580F1;\n\t\t\t\tcolor: #ffffff;\n\t\t\t}\n\n\t\t\t.rd-webpush-modal__button--subscribe:hover,\n\t\t\t.rd-webpush-modal__button--subscribe:focus {\n\t\t\t\tbackground-color: #3B9EF5;\n\t\t\t}\n\n\t\t\t.rd-webpush-modal__button--cancel {\n\t\t\t\tcolor: #0580F1;\n\t\t\t\tbackground-color: transparent;\n\t\t\t}\n\n\t\t\t.rd-webpush-modal__button--cancel:hover,\n\t\t\t.rd-webpush-modal__button--cancel:focus {\n\t\t\t\tcolor: #0366C7;\n\t\t\t\tbackground-color: rgba(5, 128, 241, 0.3);\n\t\t\t}\n\t\t",t}},{key:"_getDialogTemplate",value:function(){this._modal=document.createElement("dialog"),this._modal.id="rd-webpush-modal";var t=this._getLocations();return this._modal.innerHTML='\n\t\t\t<div class="rd-webpush-modal__content">\n\t\t\t\t<div class="rd-webpush-modal__header">\n\t\t\t\t\t<div class="rd-webpush-modal__icon-container">\n\t\t\t\t\t\t<img src="https://d335luupugsy2.cloudfront.net/cms/public-assets/web_push/web_push_bell.svg" alt="bell icon">\n\t\t\t\t\t</div>\n\t\t\t\t\t<p class="rd-webpush-modal__description">'.concat(t.description,'</p>\n\t\t\t\t</div>\n\t\t\t\t<div class="rd-webpush-modal__footer">\n\t\t\t\t\t<button class="rd-webpush-modal__button rd-webpush-modal__button--cancel" id="cancel-button">').concat(t.actions.cancel,'</button>\n\t\t\t\t\t<button class="rd-webpush-modal__button rd-webpush-modal__button--subscribe" id="confirm-button">').concat(t.actions.confirm,"</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"),this._modal}},{key:"_init",value:function(){document.head.appendChild(this._getDialogStyles()),document.body.appendChild(this._getDialogTemplate()),this._addActionListeners()}},{key:"_addActionListeners",value:function(){var t=this,e=this._modal.querySelector("#confirm-button");this._modal.querySelector("#cancel-button").onclick=function(){return t.close()},e.onclick=function(){return t._confirm()}}},{key:"_confirm",value:function(){this.onConfirmCallback(),this.close()}},{key:"_getLocations",value:function(){var t;return null!==(t=Mr[this._language])&&void 0!==t?t:Mr["pt-BR"]}},{key:"open",value:function(){var t=this;this._init(),this._modal&&window.setTimeout((function(){t._modal.setAttribute("open","true"),localStorage.setItem(jr,(new Date).toString())}),5e3)}},{key:"close",value:function(){this._modal&&this._modal.removeAttribute("open"),this.onCancelCallback()}},{key:"addOnConfirmCallback",value:function(t){this.onConfirmCallback=t}},{key:"addOnCancelCallback",value:function(t){this.onCancelCallback=t}},{key:"setLanguage",value:function(t){t&&(this._language=t)}}])&&Fr(t.prototype,e),n&&Fr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Kr(t){return Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kr(t)}function Wr(){Wr=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new L(r||[]);return o(a,"_invoke",{value:O(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",g="completed",y={};function v(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var _=Object.getPrototypeOf,S=_&&_(_(P([])));S&&S!==n&&r.call(S,a)&&(w=S);var k=b.prototype=v.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Kr(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,n,r){var o=p;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=T(s,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(e,n,r);if("normal"===u.type){if(o=r.done?g:h,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=g,r.method="throw",r.arg=u.arg)}}}function T(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function P(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(Kr(e)+" is not iterable")}return m.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(I.prototype),u(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new I(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(k),u(k,c,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function $r(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Ur(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){$r(i,r,o,a,s,"next",t)}function s(t){$r(i,r,o,a,s,"throw",t)}a(void 0)}))}}function Gr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zr(r.key),r)}}function Vr(t,e,n){return(e=zr(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zr(t){var e=function(t,e){if("object"!=Kr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Kr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kr(e)?e:e+""}var qr=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Vr(this,"path",null),Vr(this,"register",null)},e=[{key:"setFilePath",value:function(t){this.path=t||Qn().SERVICE_WORKER_PATH}},{key:"_isFilePathSet",value:function(){var t=!!this.path;return t||console.info("RD Notification: The SDK file path is not defined"),t}},{key:"getUpdatedRegistration",value:(i=Ur(Wr().mark((function t(){var e;return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._isFilePathSet()){t.next=2;break}return t.abrupt("return");case 2:if(!("serviceWorker"in navigator)){t.next=16;break}return t.prev=3,t.next=6,navigator.serviceWorker.getRegistration(this.path);case 6:return e=t.sent,t.next=9,e.update();case 9:return console.info("RD Notification: ServiceWorker registration updated"),t.abrupt("return",e);case 13:t.prev=13,t.t0=t.catch(3),console.info("RD Notification: error on retrieving ServiceWorker registration");case 16:case"end":return t.stop()}}),t,this,[[3,13]])}))),function(){return i.apply(this,arguments)})},{key:"registerWorker",value:(o=Ur(Wr().mark((function t(){var e;return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._isFilePathSet()){t.next=2;break}return t.abrupt("return");case 2:if(!("serviceWorker"in navigator)){t.next=13;break}return t.prev=3,t.next=6,navigator.serviceWorker.register(this.path);case 6:return e=t.sent,t.abrupt("return",e);case 10:t.prev=10,t.t0=t.catch(3),console.info("RD Notification: ServiceWorker registration failed");case 13:case"end":return t.stop()}}),t,this,[[3,10]])}))),function(){return o.apply(this,arguments)})},{key:"unregisterWorker",value:(r=Ur(Wr().mark((function t(){var e;return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._isFilePathSet()){t.next=2;break}return t.abrupt("return");case 2:if(!("serviceWorker"in navigator)){t.next=9;break}return t.next=5,navigator.serviceWorker.getRegistration(this.path);case 5:if(!(e=t.sent)){t.next=9;break}return t.next=9,e.unregister();case 9:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}],e&&Gr(t.prototype,e),n&&Gr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,o,i}();function Yr(t){return Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yr(t)}function Jr(){Jr=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new L(r||[]);return o(a,"_invoke",{value:O(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",g="completed",y={};function v(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var _=Object.getPrototypeOf,S=_&&_(_(P([])));S&&S!==n&&r.call(S,a)&&(w=S);var k=b.prototype=v.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Yr(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,n,r){var o=p;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=T(s,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(e,n,r);if("normal"===u.type){if(o=r.done?g:h,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=g,r.method="throw",r.arg=u.arg)}}}function T(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function P(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(Yr(e)+" is not iterable")}return m.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(I.prototype),u(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new I(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(k),u(k,c,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function Qr(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Xr(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Qr(i,r,o,a,s,"next",t)}function s(t){Qr(i,r,o,a,s,"throw",t)}a(void 0)}))}}function Zr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eo(r.key),r)}}function to(t,e,n){return(e=eo(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eo(t){var e=function(t,e){if("object"!=Yr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Yr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Yr(e)?e:e+""}var no="webpusherTokenExpirationTimestamp",ro=function(){return t=function t(e){var n=this,r=e.pushService,o=e.webpusherClient,i=e.permissionModal,a=e.workerService;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),to(this,"pushService",null),to(this,"webpusherClient",null),to(this,"permissionModal",null),to(this,"workerService",null),to(this,"webpushAccountId",null),to(this,"_onPermissionModalConfirmation",Xr(Jr().mark((function t(){var e;return Jr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Notification.requestPermission();case 3:if(e=t.sent,console.info("RD Notification: notification permission status:",e),"granted"!==e){t.next=10;break}return t.next=8,n._handleGrantedPermission();case 8:t.next=11;break;case 10:"default"===e&&n._handleDefaultPermission();case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.info("RD Notification: error handling permission modal confirmation:",t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))),to(this,"_handleGrantedPermission",Xr(Jr().mark((function t(){var e;return Jr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.workerService.registerWorker();case 2:if(e=t.sent){t.next=5;break}return t.abrupt("return");case 5:n._sendTokenToWebpusher(e),n.pushService.registerNotificationListener();case 7:case"end":return t.stop()}}),t)})))),to(this,"_refreshToken",Xr(Jr().mark((function t(){var e;return Jr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n._isTokenExpired()){t.next=7;break}return t.next=3,n.workerService.getUpdatedRegistration();case 3:if(!(e=t.sent)){t.next=7;break}return t.next=7,n._sendTokenToWebpusher(e);case 7:case"end":return t.stop()}}),t)})))),to(this,"_sendTokenToWebpusher",function(){var t=Xr(Jr().mark((function t(e){var r;return Jr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.pushService.getServiceToken(e);case 3:"SUCCESS"===(r=t.sent).status&&(n.webpusherClient.sendToken({token:r.token,webpushAccountId:n.webpushAccountId}),n._setTokenExpirationTimestamp()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.info("RD Notification: error sending token to webpusher:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()),to(this,"_isTokenExpired",(function(){var t=localStorage.getItem(no),e=new Date;return!t||e.getTime()>parseInt(t,10)})),to(this,"_handleDefaultPermission",(function(){var t=(parseInt(localStorage.getItem(Dr),10)||0)+1;!function(t){localStorage.setItem(Dr,t)}(t>3?3:t)})),this.pushService=r,this.webpusherClient=o,this.permissionModal=i,this.workerService=a},e=[{key:"init",value:(r=Xr(Jr().mark((function t(e){var n,r,o,i,a;return Jr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.webpushAccountId,r=e.language,o=e.domain,i=e.filePath,this._isAuthorizedDomain(o)){t.next=3;break}return t.abrupt("return");case 3:return this.workerService.setFilePath(i||Qn().SERVICE_WORKER_PATH),t.next=6,this.workerService.registerWorker();case 6:if(t.sent){t.next=9;break}return t.abrupt("return");case 9:if(this.webpushAccountId=n,this.permissionModal.setLanguage(r),"granted"!==(a=Notification.permission)){t.next=16;break}return t.next=15,this._refreshToken();case 15:this.pushService.registerNotificationListener();case 16:if("default"!==a&&"denied"!==a){t.next=20;break}return t.next=19,this.workerService.unregisterWorker();case 19:this._clearExpirationTimestamp();case 20:"default"===a&&Nr()&&(this.permissionModal.addOnConfirmCallback(this._onPermissionModalConfirmation),this.permissionModal.addOnCancelCallback(this._handleDefaultPermission),this.permissionModal.open());case 21:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"_getCurrentPageHostname",value:function(){return window.location.hostname}},{key:"_isAuthorizedDomain",value:function(t){try{return Ar(this._getCurrentPageHostname())===Ar(new URL(t).hostname)}catch(t){return!1}}},{key:"_setTokenExpirationTimestamp",value:function(){var t=(new Date).getTime()+6048e5;Number.isFinite(t)&&localStorage.setItem(no,t.toString())}},{key:"_clearExpirationTimestamp",value:function(){localStorage.removeItem(no)}}],e&&Zr(t.prototype,e),n&&Zr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}(),oo=new Hr,io=new Ir,ao=new Pr,so=new qr;window.webpushClient=new ro({pushService:io,webpusherClient:ao,permissionModal:oo,workerService:so}),window.dispatchEvent(new CustomEvent("RDWebPushClientLoaded"))})(),WebpushClient=r})();